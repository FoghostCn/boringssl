{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "80b5937d_fccfc0a7",
        "filename": "crypto/x509/internal.h",
        "patchSetId": 4
      },
      "lineNbr": 412,
      "author": {
        "id": 14196
      },
      "writtenOn": "2023-01-17T22:15:47Z",
      "side": 1,
      "message": "It currently leaves it unset if it applies to the entire chain and depends on the fact that it got called with it being NULL in the first place.\n\nAlternatively you could change this description to say that out_current_cert is set if the error is X509_V_ERR_INVALID_POLICY_EXTENSION\nand is unset otherwise.",
      "range": {
        "startLine": 412,
        "startChar": 12,
        "endLine": 412,
        "endChar": 62
      },
      "revId": "eb0b26c78c32f79be40ae77a7a6a362ea8950591",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "935456f4_12a3d1b9",
        "filename": "crypto/x509/internal.h",
        "patchSetId": 4
      },
      "lineNbr": 412,
      "author": {
        "id": 14196
      },
      "writtenOn": "2023-01-17T22:21:43Z",
      "side": 1,
      "message": "Aha. wait no I missed the clobbering at the top.. the description is currently wrong because *out_current_cert is set unconditionally, not only on error, it is set to NULL on success. (shrug) just make the description match what you think it should do. (I\u0027m fond of unset on success but don\u0027t care that much)",
      "parentUuid": "80b5937d_fccfc0a7",
      "range": {
        "startLine": 412,
        "startChar": 12,
        "endLine": 412,
        "endChar": 62
      },
      "revId": "eb0b26c78c32f79be40ae77a7a6a362ea8950591",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "93263d8a_ba88b49d",
        "filename": "crypto/x509/policy.c",
        "patchSetId": 4
      },
      "lineNbr": 670,
      "author": {
        "id": 14196
      },
      "writtenOn": "2023-01-17T22:21:43Z",
      "side": 1,
      "message": "Aha I missed that you clobber it unconditionally at the top. oops.",
      "revId": "eb0b26c78c32f79be40ae77a7a6a362ea8950591",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "307507b2_1ce31bd3",
        "filename": "crypto/x509/policy.c",
        "patchSetId": 4
      },
      "lineNbr": 697,
      "author": {
        "id": 14196
      },
      "writtenOn": "2023-01-17T22:43:17Z",
      "side": 1,
      "message": "Could potentially move declaration of this to the function level (maybe current_cert) initialize to NULL, then just set *out_current_cert in the err: portion depending on the value of ret, instead of doing it repeatedly before doing goto err;",
      "revId": "eb0b26c78c32f79be40ae77a7a6a362ea8950591",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b97ef6a_df286c3f",
        "filename": "crypto/x509/policy.c",
        "patchSetId": 4
      },
      "lineNbr": 724,
      "author": {
        "id": 14196
      },
      "writtenOn": "2023-01-17T22:15:47Z",
      "side": 1,
      "message": "If you\u0027re going to match the description you need to set *out_current_cert \u003d NULL here.",
      "revId": "eb0b26c78c32f79be40ae77a7a6a362ea8950591",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8cdb431_b3754d5f",
        "filename": "crypto/x509/policy.c",
        "patchSetId": 4
      },
      "lineNbr": 742,
      "author": {
        "id": 14196
      },
      "writtenOn": "2023-01-17T22:43:17Z",
      "side": 1,
      "message": "We\u0027re using openssl error values as return values here, and we\u0027re just sort of trusting that the function we just called that returned something we believe is a failure did an OPENSSL_PUT_ERROR of the same value and we got it right because of prayer and clean living.  \n\nSpeaking as someone who has attempted and failed such clean living with openssl error values in another life, Is there a way we could maybe change these functions to give us an out_err and we always use that instead of encoding the logic in here?",
      "range": {
        "startLine": 742,
        "startChar": 4,
        "endLine": 742,
        "endChar": 50
      },
      "revId": "eb0b26c78c32f79be40ae77a7a6a362ea8950591",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a297e3ed_6347cd32",
        "filename": "crypto/x509/policy.c",
        "patchSetId": 4
      },
      "lineNbr": 783,
      "author": {
        "id": 14196
      },
      "writtenOn": "2023-01-17T22:15:47Z",
      "side": 1,
      "message": "If you\u0027re going to match the description you need to set *out_current_cert\u003dNULL here.",
      "revId": "eb0b26c78c32f79be40ae77a7a6a362ea8950591",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92a98a68_c55d1453",
        "filename": "crypto/x509/x509_test.cc",
        "patchSetId": 4
      },
      "lineNbr": 5522,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-01-17T19:58:25Z",
      "side": 1,
      "message": "Self-review: computed safely",
      "range": {
        "startLine": 5522,
        "startChar": 13,
        "endLine": 5522,
        "endChar": 30
      },
      "revId": "eb0b26c78c32f79be40ae77a7a6a362ea8950591",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    }
  ]
}