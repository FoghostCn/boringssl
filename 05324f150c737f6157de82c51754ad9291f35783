{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2d030d29_da793883",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "Thanks! Some style nits, and also a couple questions about how DNS is meant to work.",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89a02a2b_5b16676e",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 42,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "Style nit: We usually don\u0027t prefix these with \"flag\".",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "910f7f17_07ba753e",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 62,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "I assume that\u0027s not what the field is intended for. :-)\n\nThis seems to use a random number over UDP:\nhttps://source.chromium.org/chromium/chromium/src/+/main:net/dns/dns_transaction.cc;drc\u003dc06511a314747fab345af58b8523eec1b36caf05;l\u003d1232\n\nOver DoH, this seems to use zero, but I guess we\u0027re using UDP now:\nhttps://source.chromium.org/chromium/chromium/src/+/main:net/dns/dns_transaction.cc;drc\u003dc06511a314747fab345af58b8523eec1b36caf05;l\u003d581\n\nAnd then this mDNS logic seems to use zero:\nhttps://source.chromium.org/chromium/chromium/src/+/main:net/dns/mdns_client_impl.cc;l\u003d224;drc\u003dc06511a314747fab345af58b8523eec1b36caf05?q\u003dquestion\u0026ss\u003dchromium%2Fchromium%2Fsrc:net%2Fdns%2F\n\nI take it then we want a random number here?",
      "range": {
        "startLine": 62,
        "startChar": 23,
        "endLine": 62,
        "endChar": 29
      },
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "390bab97_55fd7cff",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 69,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "All the false and zero values will just be zero-initialized. Unless it\u0027s necessary to list them all, semantically, leave them out.\n\ngo/go-style/decisions#literal-zero-value-fields",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa117a7b_10c6c26a",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 73,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "Nit: Since domain comes from the command-line, panicking on error seems slightly rude. (Although it looks like NewName just checks a length and not much else.)",
      "range": {
        "startLine": 73,
        "startChar": 22,
        "endLine": 73,
        "endChar": 33
      },
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6232cef6_d0a15ddc",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 79,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "Assuming this package does not distinguish the nil slice from other empty slices, go/go-style/decisions#literal-zero-value-fields applies here too.",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bddd43e_47325e01",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 92,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "If the response is not exactly 512 bytes, won\u0027t this leave trailing zeros in the answer? It seems this should be:\n\nn, err \u003d conn.Read(response)\nif err !\u003d nil {\n  ...\n}\nresponse \u003d response[:n]",
      "range": {
        "startLine": 92,
        "startChar": 1,
        "endLine": 92,
        "endChar": 2
      },
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0db0be0c_b3982064",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 98,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "Should we check that the Header has an ID that matches? What about other fields? (I\u0027m not familiar with the DNS protocol.)",
      "range": {
        "startLine": 98,
        "startChar": 4,
        "endLine": 98,
        "endChar": 5
      },
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54d5587d_9e3c2560",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 102,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "Is the expectation that you ignore all the answers like this?",
      "range": {
        "startLine": 102,
        "startChar": 2,
        "endLine": 102,
        "endChar": 3
      },
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "820a5c69_0a4038a5",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 138,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "I\u0027d omit this. This function will work regardless of what the contents are. If it\u0027s not an ECHConfigList, we still want to get the bytes and then have the bssl tool notice.",
      "range": {
        "startLine": 137,
        "startChar": 67,
        "endLine": 138,
        "endChar": 37
      },
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4c2d6ca_86ac7f7a",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 139,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "Link to section in the spec.",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "401fe69c_de9af44f",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 141,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "I suppose this works, but it does seem like https://golang.org/pkg/vendor/golang.org/x/crypto/cryptobyte/#String would be a bit more straightforward. :-)",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "144392ea_4c0a1e9a",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 145,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "if err :\u003d binary.Read(...); err !\u003d nil {",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3c2a86e_1f5376e1",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 147,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "priority \u003d 0 means it\u0027s an AliasMode record, right? I suppose to be really fancy, we\u0027d follow it, but we should at least detect it and report an error, rather than continue parsing and violate rules like:\n\n\u003e In AliasMode, records SHOULD NOT include any SvcParams, and recipients MUST ignore any SvcParams that are present.",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f859e210_cfabf9e5",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 152,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "if err :\u003d ...; err !\u003d nil {",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3898695_5113ccca",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 160,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "if _, err :\u003d ...; err !\u003d nil {",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e573a626_4ba371c0",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 170,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "if err :\u003d ...; err !\u003d nil {",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d5f64cd6_dc057445",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 175,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "if err :\u003d ...; err !\u003d nil {",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a5241b9_60e8a1bd",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 185,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "return nil, fmt.Errorf(...)",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3370ac9_c57d4445",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 195,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "return nil, errors.New(...)",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9f553d8_68e1a01e",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 230,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "if err \u003d ...; err !\u003d nil {",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2cc75c23_14ed4318",
        "filename": "util/fetch_ech_config_list.go",
        "patchSetId": 5
      },
      "lineNbr": 231,
      "author": {
        "id": 5415
      },
      "writtenOn": "2021-06-09T23:13:48Z",
      "side": 1,
      "message": "log.Printf(\"Failed to write file: %s\\n\", err) to be consistent",
      "revId": "05324f150c737f6157de82c51754ad9291f35783",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    }
  ]
}