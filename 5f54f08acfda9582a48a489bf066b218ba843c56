{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6c8130c1_eeb31256",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 14196
      },
      "writtenOn": "2023-06-07T15:54:00Z",
      "side": 1,
      "message": "\u003e https://boringssl-review.googlesource.com/c/boringssl/+/60507\n\nIt\u0027s really not that horrible to be honest.",
      "tag": "mailMessageId\u003d\u003cCALA6n3GB8wvR8L\u003d3ufEAWqFpTmbR57Nz1_W6Lvh49d_LL1cMHg@mail.gmail.com\u003e",
      "revId": "5f54f08acfda9582a48a489bf066b218ba843c56",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47e6d0b1_33f0a8ca",
        "filename": "crypto/stack/stack_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 217,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-06-06T22:51:28Z",
      "side": 1,
      "message": "It\u0027s not an issue of refactoring. The types of these functions are correct and cannot be changed (part of the public API we must retain).\n\nThe issue is we cannot implement the function we need to using `qsort`. We need `qsort_r`, which is a compatibility disaster, and often unavailable.\nhttps://boringssl.googlesource.com/boringssl/+/refs/heads/master/crypto/stack/stack.c#404\n\nIf Fuchsia had `qsort_r` or `qsort_s`, we could fix it for Fuchsia, but code search suggests you all don\u0027t have it at all.\n\nI don\u0027t think disabling sanitizers on all our comparison functions is a good option. Will ponder this tomorrow... I worry the answer may be that we need to implement our own sort, like we did with `bsearch`, and give up on the libc version.",
      "revId": "5f54f08acfda9582a48a489bf066b218ba843c56",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83ab0dd7_ff7053b6",
        "filename": "crypto/stack/stack_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 217,
      "author": {
        "id": 16326
      },
      "writtenOn": "2023-06-06T23:36:30Z",
      "side": 1,
      "message": "As an alternative idea, would it be possible to instead make files like `crypto/stack/stack.c` a c++ file? Then I think we could use a lambda that could be passed to regular `qsort` and the original function passed as a capture.",
      "parentUuid": "47e6d0b1_33f0a8ca",
      "revId": "5f54f08acfda9582a48a489bf066b218ba843c56",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1db596b_3a5cb144",
        "filename": "crypto/stack/stack_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 217,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-06-07T01:00:45Z",
      "side": 1,
      "message": "Yeah, C++ would be nicer in a lot of ways. :-/ The nuisance is Bazel is pretty bad at mixing C and C++ in a single target, so some of our downstream builds would be a bit impacted.\n\nI put together the \"give up on `qsort`\" option which, while disappointing, isn\u0027t *horrible*. So that could be an option.\nhttps://boringssl-review.googlesource.com/c/boringssl/+/60507",
      "parentUuid": "83ab0dd7_ff7053b6",
      "revId": "5f54f08acfda9582a48a489bf066b218ba843c56",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dafc10e0_7c9a63a4",
        "filename": "crypto/stack/stack_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 217,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-06-07T17:55:02Z",
      "side": 1,
      "message": "Alright, that\u0027s now in BoringSSL upstream. Does that resolve sanitizer warnings?",
      "parentUuid": "c1db596b_3a5cb144",
      "revId": "5f54f08acfda9582a48a489bf066b218ba843c56",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9fa4cc36_13622956",
        "filename": "crypto/stack/stack_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 217,
      "author": {
        "id": 5415
      },
      "writtenOn": "2023-06-07T17:59:17Z",
      "side": 1,
      "message": "Also interesting that we can\u0027t repro this on our CI... do you all build your libc with `-fsanitize\u003dundefined` enabled? Maybe that\u0027s why you hit it and we don\u0027t.",
      "parentUuid": "dafc10e0_7c9a63a4",
      "revId": "5f54f08acfda9582a48a489bf066b218ba843c56",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212"
    }
  ]
}