{
  "comments": [
    {
      "key": {
        "uuid": "154eb20c_3b5e3732",
        "filename": "ssl/s3_lib.c",
        "patchSetId": 2
      },
      "lineNbr": 1052,
      "author": {
        "id": 5075
      },
      "writtenOn": "2014-11-05T06:16:21Z",
      "side": 1,
      "message": "Poking at this more, since SSL_clear is supposed to reset things for a new handshake, I would be extremely surprised if this weren\u0027t possible. Though we\u0027d need to be a bit careful. s-\u003epacket points into rbuf and that doesn\u0027t get reset here. There may be other raw pointers flying around too... perhaps this needs to get filed further under \"properly organize all the state\".\n\n(Alternatively, I wonder if we could just kill SSL_clear. I saw some calls right after SSL_new which are no-ops and some calls before destroying it, which is also a no-op. It\u0027s specifically re-using an SSL for a new connection that\u0027s a little weird.)",
      "revId": "528d6de22b73a9bfe650416c52ce79d57d5b1556",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "55f02a0f_03d8d280",
        "filename": "ssl/s3_lib.c",
        "patchSetId": 2
      },
      "lineNbr": 1052,
      "author": {
        "id": 5005
      },
      "writtenOn": "2014-11-06T01:57:26Z",
      "side": 1,
      "message": "I don\u0027t think that we can remove SSL_clear, from looking at the callers list.\n\nBut I think that we could certainly rework things so that it\u0027s just ssl3_free + ssl3_new.",
      "parentUuid": "154eb20c_3b5e3732",
      "revId": "528d6de22b73a9bfe650416c52ce79d57d5b1556",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1596b2c9_be7f55d6",
        "filename": "ssl/s3_lib.c",
        "patchSetId": 2
      },
      "lineNbr": 1052,
      "author": {
        "id": 5075
      },
      "writtenOn": "2014-11-07T00:28:45Z",
      "side": 1,
      "message": "Yeah, especially since SSL_clear actually has a case where it just calls those two anyway. I\u0027ll want to double-check it\u0027s safe (that nothing resets s-\u003epacket makes me uneasy), but I\u0027ve added it to my TODO list.",
      "parentUuid": "55f02a0f_03d8d280",
      "revId": "528d6de22b73a9bfe650416c52ce79d57d5b1556",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "154eb20c_5b7ea3a1",
        "filename": "ssl/s3_lib.c",
        "patchSetId": 2
      },
      "lineNbr": 1057,
      "author": {
        "id": 5075
      },
      "writtenOn": "2014-11-05T06:05:07Z",
      "side": 1,
      "message": "This doesn\u0027t actually end up being a use-after-free because line 1092 memsets everything anyway. I left the NULL assignments to be consistent though this function really ought to get merged with ssl3_free.",
      "revId": "528d6de22b73a9bfe650416c52ce79d57d5b1556",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212",
      "unresolved": false
    }
  ]
}