{
  "comments": [
    {
      "key": {
        "uuid": "4a5c2064_39294fbe",
        "filename": "crypto/bn/generic.c",
        "patchSetId": 3
      },
      "lineNbr": 1069,
      "author": {
        "id": 5075
      },
      "writtenOn": "2015-07-31T22:30:16Z",
      "side": 1,
      "message": "Aaaahhhhh. I really don\u0027t like this do/while fake for loop. I think the old one was clearer, despite the goto enter. MSVC\u0027s unreachable code check seems to have been fairly dumb thus far, so contortions to appease it don\u0027t seem very worthwhile. Though, honestly, both LHS and RHS are pretty bad what with the goto enter in there. This code can do with cleanup regardless.\n\nThis bit is *almost* the same as what\u0027s in the loop. I think you actually can just delete all this and replace it with initializing tp with 0. (Although the compiler won\u0027t be able to optimize that away, if we care. Probably not? We can see what bssl speed thinks. Otherwise, could also just stick an if in there. It seems to just be skipping the memset.)\n\n(It\u0027s also potentially different if num is 0, but that would break anyway due to line 1109 on the LHS.)",
      "range": {
        "startLine": 1053,
        "startChar": 0,
        "endLine": 1069,
        "endChar": 13
      },
      "revId": "0ab327a7acb7e21bd589cab2662e83135498b829",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2aa44cb9_90c11499",
        "filename": "crypto/bn/generic.c",
        "patchSetId": 3
      },
      "lineNbr": 1069,
      "author": {
        "id": 5525
      },
      "writtenOn": "2015-08-06T18:15:10Z",
      "side": 1,
      "message": "RE MSVC\u0027s unreachable code check: It is technically correct here, so it\u0027s hard to blame it. I personally do find that check useful. It is also a prerequisite for other static analysis stuff, so I\u0027d like to find a way to improve the readability of the code while also facilitating the static analysis. I think this new version does that.\n\nRe-reading your comment just now, I think you may be suggesting a more extensive change than what I made here. I think there are probably lots of ways to improve this code, but I think they are better deferred to later, if at all reasonable.",
      "parentUuid": "4a5c2064_39294fbe",
      "range": {
        "startLine": 1053,
        "startChar": 0,
        "endLine": 1069,
        "endChar": 13
      },
      "revId": "0ab327a7acb7e21bd589cab2662e83135498b829",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2aa44cb9_30814852",
        "filename": "crypto/bn/generic.c",
        "patchSetId": 3
      },
      "lineNbr": 1069,
      "author": {
        "id": 5075
      },
      "writtenOn": "2015-08-06T18:48:30Z",
      "side": 1,
      "message": "So, poking around some more, I\u0027m now fairly convinced that this code never runs. First, it\u0027s only defined if:\n\n #if defined(OPENSSL_NO_ASM) || (!defined(OPENSSL_ARM) \u0026\u0026 \\\n                                 !defined(OPENSSL_X86_64))\n\nNext, every caller seems to be guarded by either:\n\n #if !defined(OPENSSL_NO_ASM) \u0026\u0026 \\\n     (defined(OPENSSL_X86) || defined(OPENSSL_X86_64))\n #define OPENSSL_BN_ASM_MONT\n #endif\n\nOr:\n\n #if !defined(OPENSSL_NO_ASM) \u0026\u0026 defined(OPENSSL_X86_64)\n #define OPENSSL_BN_ASM_MONT5\n #define RSAZ_ENABLED\n \n #include \"rsaz_exp.h\"\n #endif\n\n\nThat leaves OPENSSL_X86 without OPENSSL_NO_ASM. However, in that case, bn_mont_mul is provided by x86-mont.pl.\n\n\nMoreover, that entire file is guarded by:\n\n #if defined(OPENSSL_NO_ASM) || \\\n     (!defined(OPENSSL_X86_64) \u0026\u0026 !defined(OPENSSL_X86)) || \\\n     (defined(OPENSSL_X86_64) \u0026\u0026 defined(OPENSSL_WINDOWS))\n\nSo this is really:\n\n #if defined(OPENSSL_NO_ASM) || \\\n   (!defined(OPENSSL_ARM) \u0026\u0026 !defined(OPENSSL_X86_64) \u0026\u0026 \\\n    !defined(OPENSSL_X86_64))",
      "parentUuid": "2aa44cb9_90c11499",
      "range": {
        "startLine": 1053,
        "startChar": 0,
        "endLine": 1069,
        "endChar": 13
      },
      "revId": "0ab327a7acb7e21bd589cab2662e83135498b829",
      "serverId": "66b711a4-aa9b-3dac-9062-916540830212",
      "unresolved": false
    }
  ]
}